<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./particles/head'); %>
  </head>
  <body>
    <div class="container">
      <% if (isListening) { %>
      <div class="row mt-3">
        <div class="col d-flex justify-content-center">
          <h1 class="text-white">Now playing:</h1>
        </div>
      </div>
      <div class="row">
        <div class="col d-flex justify-content-center">
          <a href="<%= uri %>"><img src="<%= image %>" alt="cover" class="cover" /></a>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col d-flex justify-content-center">
          <a href="<%= uri %>" class="text-white h1 text-center" id="trackName"
            ><%= name %></a
          >
        </div>
      </div>
      <div class="row">
        <div class="col d-flex justify-content-center">
          <h6 class="author-name text-center"><%= author %></h6>
        </div>
      </div>
      <div class="row d-flex justify-content-center">
        <div class="col d-flex justify-content-center align-items-center">
          <span class="seconds" id="currentTime"></span>
          <span class="seconds">/</span>
          <span class="seconds" id="fullTime"></span>
          <!-- <div class="col d-flex justify-content-end me-2 seconds" ></div> -->
          <!-- <canvas id="progress" width="220" height="50"></canvas> -->
          <!-- <div class="col d-flex justify-content-start ms-2 seconds" ></div> -->
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-6 offset-3 d-flex justify-content-center">
          <input class="c-checkbox" type="checkbox" id="checkbox" />
          <div class="c-formContainer">
            <form class="c-form" id="c-form" method="get" action="/player/add-to-queue">
              <input
                class="c-form__input"
                placeholder="Track Name"
                type="input"
                name="search"
                required
              />
              <label
                class="c-form__buttonLabel"
                for="checkbox"
                onclick="document.getElementById('c-form').submit()"
              >
                <button class="c-form__button" type="button">Add</button>
              </label>
              <label
                class="c-form__toggle"
                for="checkbox"
                data-title="Add To Queue"
              ></label>
            </form>
          </div>
        </div>
      </div>
      <% } else{ %>
      <div class="row mt-3">
        <div class="col d-flex justify-content-center align-center">
          <h1 class="text-white">Now I'm busy, I'll listen to music later</h1>
        </div>
      </div>
      <% } %>

      <div class="row">
        <div class="col-sm-10 offset-sm-1 col-lg-6 offset-lg-3">
          <hr />
        </div>
      </div>
      <div class="row">
        <div class="col d-flex justify-content-center align-center">
          <h1 class="text-white h3">Recently Played:</h1>
        </div>
      </div>
      <% recentlyTrack.forEach(t => { %>
      <div class="row my-2">
        <div
          class="
            col-sm-10
            offset-sm-1
            col-lg-6
            offset-lg-3
            d-flex
            flex-row
            justify-content-between
          "
        >
          <div class="d-flex flex-row">
            <img src="<%= t.image %>" alt="cover" class="mini_cover" />
            <div class="ms-2 align-self-center">
              <a
                href="<%= t.uri %>"
                class="recently-text text-truncate text-white"
                style="max-width: 170px;display:block;"
                ><%= t.name %></a
              >

              <div class="recently-text text-truncate" style="max-width: 170px">
                <%= t.author %>
              </div>
            </div>
          </div>
          <div class="align-self-center recently-text"><%= t.playedAt %></div>
        </div>
      </div>
      <% }); %>
      <div class="row">
        <div class="col-10 offset-1 col-lg-4 offset-lg-4">
          <hr />
        </div>
      </div>
      <div class="row my-3">
        <div
          class="
            col-sm-10
            offset-sm-1
            col-lg-6
            offset-lg-3
            d-flex
            flex-row
            justify-content-evenly
          "
        >
          <a href="/top/tracks">Top Tracks</a>
          <a href="/top/artists">Top Artists</a>
        </div>
      </div>
    </div>
    <script src="js/scripts.js"></script>
  </body>
</html>
